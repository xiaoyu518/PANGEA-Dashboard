<!DOCTYPE html>
<html>
  <head>
    <title>Uganda Rakai Skygrid Plot</title>
    <meta charset="utf-8" />

    <script src="https://cdn.jsdelivr.net/npm/vega@5.15.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@4.15.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.11.1"></script>

    <style media="screen">
      .vega-actions a {
        margin-right: 5px;
      }
    </style>
  </head>
  <body>
	<div id="vis"></div>
    <script>
    	// Assign the specification to a local variable vlSpec.
    	var vlSpec = {
			$schema: 'https://vega.github.io/schema/vega-lite/v4.json',
			data: {url: "https://github.com/xiaoyu518/Pangea_pipeline/blob/master/Uganda_Rakai.tsv"},
	 		vconcat: [
    			{
			width: 750,
			height: 350,
			view: { stroke: "" },
				  "layer": [
				  "data": {"url": "https://github.com/xiaoyu518/Pangea_pipeline/blob/master/Uganda_Rakai.tsv"},
				  "layer": [
					    {
					    "mark": {
						"type": "errorband", 
						"clip": true,
						"opacity": 0.3},
					    "encoding": {
						"y": {
						"field": "Upper",
						"type": "quantitative",
						"title": "Skygrid Plot",
						"axis": {"titleColor": "#85A9C5"},
						"scale": { "type": "log", "domain": [0.1, 1000000]}
						},
						"y2": {
						"field": "Lower"
						},
						"x": {
						"field": "Time",
						    "type": "temporal",
						"axis": {"title": "Year"}
						}
					    }
					    },
						{
						"mark": {
						    "stroke": "#85A9C5",
						    "clip": true, 
						    "opacity":0.7,
						    "type": "line"
						    },
						"encoding": {
						    "y": {
						    "field": "Mean",
						    "type": "quantitative",
						    "axis": {
							"titleColor": "#85A9C5",
							"labels":false,
							"title":"",
							"ticks":false},
						    "scale": { "type": "log", "domain": [0.1, 1000000]}
						    },
						    "x": {
						    "field": "Date",
							"type": "temporal",
						    "axis": {"title": "Year"}
						    }
						}
					    },
					    {
					    "data": {"url":"https://github.com/xiaoyu518/Pangea_pipeline/blob/master/Uganda_Rakai_samplesize.csv"},
						"mark": {"stroke": "#c58595", "type": "tick"},
						"encoding": {
						    "y": {
						    "field": "sampleSize",
						    "title": "Sample Size",
						    "type": "ordinal",
						    "axis": {
							"titleColor":"#c58595"
							},
						    "scale": {
							"reverse":true,
							"domain": {"unionWith":[1,10]}}
						    },
						    "x": {
						    "field": "Date",
							"type": "temporal",
						    "axis": {"title": "Year"}
					}
				}
			}
		]			
	};

     // Embed the visualization in the container with id `vis`
	vegaEmbed('#vis', vlSpec);

    </script>
  </body>
</html>
